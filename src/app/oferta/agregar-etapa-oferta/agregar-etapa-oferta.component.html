<form #formAgregarEtapaOferta="ngForm" class="form-horizontal">
  <div class="alert alert-success collapse" id="msgActualizacionEtapa">
    <a href="#" data-dismiss="alert" class="close">&times;</a>
    <p class="h7">Los cambios han sido registrados</p>
  </div>
  <div>
    <h3>Agregar Etapa Oferta</h3>
    <br/>
    <div class="container">
      <div class="row">
        <div class="form-group">
          <label class="col-sm-2">Nombre</label>
          <div class="col-sm-10">
            <input class="form-control" type="text" (ngModel)="etapaOferta.nombre" name="nombre" required>
            <div class="form-control alert-danger" *ngIf="formAgregarEtapaOferta.controls.nombre?.invalid && (formAgregarEtapaOferta.controls.nombre?.touched)">El nombre de la etapa es requerida</div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="form-group row">
          <label class="col-sm-2 col-form-label">Descripción</label>
          <div class="col-sm-10">
          <textarea rows="5" class="form-control" type="text" (ngModel)="etapaOferta.descripcion" name="descripcion"></textarea>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="form-group">
          <label class="col-sm-2">Fecha Inicio</label>
          <div class="col-sm-4">
            <input class="form-control" type="text" [(ngModel)]="etapaOferta.fechaInicio" name="fechaInicio" required bsDatepicker placeholder="Seleccione una fecha..." required>
            <input [ngModel]="etapaOferta.fechaInicio | date:'shortDate'"
                   (ngModelChange)="etapaOferta.fechaInicio=$event" name="fechaInicio" type="hidden" />
            <!--<input class="form-control" type="date" (ngModel)="etapaOferta.fechaInicio" name="fechaInicio" required>-->
            <div class="form-control alert-danger" *ngIf="formAgregarEtapaOferta.controls.fechaInicio?.invalid && (formAgregarEtapaOferta.controls.fechaInicio?.touched)">La fecha de inicio de la etapa es requerida</div>
          </div>
          <label class="col-sm-2">Fecha Fin</label>
          <div class="col-sm-4">
            <input class="form-control" type="text" [(ngModel)]="etapaOferta.fechaFin" name="fechaFin" required bsDatepicker placeholder="Seleccione una fecha...">
            <input [ngModel]="etapaOferta.fechaFin | date:'shortDate'"
                   (ngModelChange)="etapaOferta.fechaFin=$event" name="fechaFin" type="hidden" />
            <div class="form-control alert-danger" *ngIf="formAgregarEtapaOferta.controls.fechaFin?.invalid && (formAgregarEtapaOferta.controls.fechaFin?.touched)">La fecha de fin de la etapa es requerida</div>
            <!--<input class="form-control" type="date" (ngModel)="etapaOferta.fechaFin" name="fechaFin" required>-->
          </div>
        </div>
      </div>

      <div class="row">
        <div class="form-group">
          <label class="col-sm-2">Cantidad a Seleccionar</label>
          <div class="col-sm-4">
            <input class="form-control" type="number" (ngModel)="etapaOferta?.cantidadASeleccionar"
                   name="cantidadASeleccionar" required>
            <div class="form-control alert-danger" *ngIf="formAgregarEtapaOferta.controls.cantidadASeleccionar?.invalid && (formAgregarEtapaOferta.controls.cantidadASeleccionar?.touched)">La cantidad a seleccionar es requerida</div>
          </div>
        </div>
      </div>
    </div>

    <!--<div *ngIf="!etapaOferta?.formulario">-->
      <!--<button type="button" class="btn btn-primary" (click)="agregarFormulario($event)"><span class="glyphicon glyphicon-plus"></span> Agregar Formulario</button>-->
    <!--</div>-->
    <div *ngIf="etapaOferta?.formulario">
      <h4>Formulario Etapa</h4>
      <hr class="sep-tt top-buffer">
      <table class="table table striped table-bordered top-buffer">
        <thead class="thead-inverse">
        <tr>
          <th>Nombre</th>
          <th>Descripción</th>
          <th>Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>{{etapaOferta?.formulario?.nombre}}</td>
          <td>{{etapaOferta?.formulario?.descripcion}}</td>
          <td>
            <div class="dropdown">
              <button class="btn" data-toggle="dropdown">Acciones <span class="caret"></span></button>
              <ul class="dropdown-menu">
                <li>
                  <a href="#" tabindex="-1" (click)="editarFormulario($event, etapaOferta.formulario.id)">Editar</a>
                </li>
                <li>
                  <a href="#" tabindex="-1"
                     (click)="eliminarFormulario($event, etapaOferta.formulario.id)">Eliminar</a>
                </li>
              </ul>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</form>


<div class="row top-buffer">
  <div class="container">
    <!--<button type="button" class="btn btn-primary" (click)="agregarEtapaOferta()"><span class="glyphicon glyphicon-ok"></span> Registrar Etapa</button>-->
    <button type="submit" class="btn btn-primary" [disabled]="formAgregarEtapaOferta.invalid" (click)="agregarEtapaOferta(formAgregarEtapaOferta.value); formAgregarEtapaOferta.reset()" [disabled]="formAgregarEtapaOferta.invalid"><span class="glyphicon glyphicon-ok"></span> Registrar Etapa</button>
    <a class="btn btn-primary" [routerLink]="['/oferta/etapas-oferta-oferente', idOferta]" role="button"><span class="glyphicon glyphicon-menu-left"></span> Atrás</a>
  </div>

</div>


<!--{{ etapaOferta | json}}-->
